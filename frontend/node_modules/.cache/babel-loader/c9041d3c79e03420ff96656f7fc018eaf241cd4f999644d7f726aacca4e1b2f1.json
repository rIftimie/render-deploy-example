{"ast":null,"code":"import _regeneratorRuntime from\"/home/rob/Personal/PROYECTOS/FullStackOpen/render-deploy-example/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/rob/Personal/PROYECTOS/FullStackOpen/render-deploy-example/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/home/rob/Personal/PROYECTOS/FullStackOpen/render-deploy-example/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/home/rob/Personal/PROYECTOS/FullStackOpen/render-deploy-example/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/rob/Personal/PROYECTOS/FullStackOpen/render-deploy-example/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect}from\"react\";import{useState}from\"react\";import\"./App.css\";import Filter from\"./components/Filter\";import Notification from\"./components/Notification\";import PersonForm from\"./components/PersonForm\";import Persons from\"./components/Persons\";import{getAll,savePerson,deleteById,updatePerson}from\"./services/fetch.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),filter=_useState8[0],setFilter=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),notification=_useState10[0],setNotification=_useState10[1];var personsToShow=_toConsumableArray(persons);if(filter){personsToShow=persons.filter(function(person){return person.name.toLowerCase().includes(filter.toLowerCase());});}function handleNewName(e){setNewName(e.target.value);}function handleNewNumber(e){setNewNumber(e.target.value);}function handleFilter(e){setFilter(e.target.value);}function handleDelete(id){if(window.confirm(\"Do you really want to delete this item?\")){deleteById(id);setPersons(persons.filter(function(person){return person.id!==id?person:null;}));var deletedPerson=persons.filter(function(person){return person.id===id;})[0];setNotification(deletedPerson.name+\" deleted\");setTimeout(function(){setNotification(null);},5000);}}function addPerson(e){e.preventDefault();var names=persons.map(function(person){return person.name;});if(newName!==null&&newNumber!==null){if(names.includes(newName)){if(window.confirm(newName+\" is already added to the phonebook. Replace the old number with a new one?\")){var updatedPerson=_objectSpread(_objectSpread({},persons.find(function(person){return person.name===newName;})),{},{number:newNumber});try{updatePerson(updatedPerson);setPersons(persons.map(function(person){if(person.name===newName){person.number=newNumber;}return person;}));setNotification(\"Updated number for \"+newName);setTimeout(function(){setNotification(null);},5000);}catch(_unused){setNotification(\"Cannot update \"+updatedPerson.name+\", person doesnt exist.\");setTimeout(function(){setNotification(null);},5000);}}}else{savePerson({name:newName,number:newNumber});setPersons(persons.concat({name:newName,number:newNumber}));setNotification(\"New person \"+newName+\" added\");setTimeout(function(){setNotification(null);},5000);}}else{window.alert(\"Error. Input must not be empty\");}}useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var allPersons;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getAll();case 2:allPersons=_context.sent;setPersons(allPersons);case 4:case\"end\":return _context.stop();}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),notification&&/*#__PURE__*/_jsx(Notification,{message:notification}),/*#__PURE__*/_jsx(Filter,{handleFilter:handleFilter}),/*#__PURE__*/_jsx(PersonForm,{addPerson:addPerson,handleNewName:handleNewName,handleNewNumber:handleNewNumber}),persons&&/*#__PURE__*/_jsx(Persons,{persons:personsToShow,handleDelete:handleDelete})]});}export default App;","map":{"version":3,"names":["useEffect","useState","Filter","Notification","PersonForm","Persons","getAll","savePerson","deleteById","updatePerson","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","notification","setNotification","personsToShow","person","name","toLowerCase","includes","handleNewName","e","target","value","handleNewNumber","handleFilter","handleDelete","id","window","confirm","deletedPerson","setTimeout","addPerson","preventDefault","names","map","updatedPerson","find","number","concat","alert","fetchData","allPersons"],"sources":["/home/rob/Personal/PROYECTOS/FullStackOpen/render-deploy-example/frontend/src/App.jsx"],"sourcesContent":["import { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport \"./App.css\";\nimport Filter from \"./components/Filter\";\nimport Notification from \"./components/Notification\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport {\n    getAll,\n    savePerson,\n    deleteById,\n    updatePerson,\n} from \"./services/fetch.js\";\n\nfunction App() {\n    const [persons, setPersons] = useState([]);\n    const [newName, setNewName] = useState(null);\n    const [newNumber, setNewNumber] = useState(null);\n    const [filter, setFilter] = useState(null);\n    const [notification, setNotification] = useState(null);\n\n    let personsToShow = [...persons];\n\n    if (filter) {\n        personsToShow = persons.filter((person) =>\n            person.name.toLowerCase().includes(filter.toLowerCase())\n        );\n    }\n\n    function handleNewName(e) {\n        setNewName(e.target.value);\n    }\n    function handleNewNumber(e) {\n        setNewNumber(e.target.value);\n    }\n    function handleFilter(e) {\n        setFilter(e.target.value);\n    }\n    function handleDelete(id) {\n        if (window.confirm(\"Do you really want to delete this item?\")) {\n            deleteById(id);\n            setPersons(\n                persons.filter((person) => (person.id !== id ? person : null))\n            );\n\n            const deletedPerson = persons.filter(\n                (person) => person.id === id\n            )[0];\n            setNotification(deletedPerson.name + \" deleted\");\n            setTimeout(() => {\n                setNotification(null);\n            }, 5000);\n        }\n    }\n\n    function addPerson(e) {\n        e.preventDefault();\n\n        const names = persons.map((person) => person.name);\n\n        if (newName !== null && newNumber !== null) {\n            if (names.includes(newName)) {\n                if (\n                    window.confirm(\n                        newName +\n                            \" is already added to the phonebook. Replace the old number with a new one?\"\n                    )\n                ) {\n                    const updatedPerson = {\n                        ...persons.find((person) => person.name === newName),\n                        number: newNumber,\n                    };\n                    try {\n                        updatePerson(updatedPerson);\n                        setPersons(\n                            persons.map((person) => {\n                                if (person.name === newName) {\n                                    person.number = newNumber;\n                                }\n                                return person;\n                            })\n                        );\n                        setNotification(\"Updated number for \" + newName);\n                        setTimeout(() => {\n                            setNotification(null);\n                        }, 5000);\n                    } catch {\n                        setNotification(\n                            \"Cannot update \" +\n                                updatedPerson.name +\n                                \", person doesnt exist.\"\n                        );\n                        setTimeout(() => {\n                            setNotification(null);\n                        }, 5000);\n                    }\n                }\n            } else {\n                savePerson({ name: newName, number: newNumber });\n                setPersons(\n                    persons.concat({ name: newName, number: newNumber })\n                );\n\n                setNotification(\"New person \" + newName + \" added\");\n                setTimeout(() => {\n                    setNotification(null);\n                }, 5000);\n            }\n        } else {\n            window.alert(\"Error. Input must not be empty\");\n        }\n    }\n\n    useEffect(() => {\n        async function fetchData() {\n            const allPersons = await getAll();\n            setPersons(allPersons);\n        }\n        fetchData();\n    }, []);\n\n    return (\n        <main>\n            <h2>Phonebook</h2>\n            {notification && <Notification message={notification} />}\n            <Filter handleFilter={handleFilter} />\n            <PersonForm\n                addPerson={addPerson}\n                handleNewName={handleNewName}\n                handleNewNumber={handleNewNumber}\n            />\n            {persons && (\n                <Persons persons={personsToShow} handleDelete={handleDelete} />\n            )}\n        </main>\n    );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}